description: |
  rav is a simple tool to help run commands.
  install with pip install rav

scripts:
  install:
    - venv/bin/python -m pip install -r requirements.txt
  install_dev:
    - venv/bin/python -m pip install -r requirements.txt
    - venv/bin/python -m pip install -r requirements.dev.txt
  makemigrations:
    - venv/bin/python tutorial/manage.py makemigrations
  migrate:
    - venv/bin/python tutorial/manage.py migrate
  dev:
    - venv/bin/python tutorial/manage.py runserver 8080
  test:
    - cd tutorial && ../venv/bin/python manage.py test
  vendors_pull:
    # grab vendor files to serve via whitenoise
    # - venv/bin/rav download staticfiles_dev
    - cd tutorial && ../venv/bin/python manage.py vendors_pull
  collectstatic:
    - cd tutorial && ../venv/bin/python manage.py collectstatic --noinput
  docker_build:
    - docker build -t dj-rest:latest .
  docker_stop:
    - docker stop dj-rest
  docker_run:
    - docker run --rm --name dj-rest --env-file .env -e PORT=8080 -p 8080:8080 dj-rest:latest
  docker_shell:
    - docker run --rm -it --env-file .env dj-rest:latest /bin/bash

downloads:
  staticfiles_prod:
    name: vendor
    destination: staticfiles/vendors
    verbose: true
    raise_on_error: true
    overwrite: true
    files:
      - name: flowbite.min.css
        overwrite: false
        url: https://cdn.jsdelivr.net/npm/flowbite@4.0.1/dist/flowbite.min.css
      - name: flowbite.min.js
        overwrite: false
        url: https://cdn.jsdelivr.net/npm/flowbite@4.0.1/dist/flowbite.min.js
  staticfiles_dev:
    name: vendor
    destination: tutorial/staticfiles/vendors
    verbose: true
    raise_on_error: true
    overwrite: true
    files:
      - name: flowbite.min.css
        overwrite: false
        url: https://cdn.jsdelivr.net/npm/flowbite@4.0.1/dist/flowbite.min.css
      - name: flowbite.min.js
        overwrite: false
        url: https://cdn.jsdelivr.net/npm/flowbite@4.0.1/dist/flowbite.min.js
